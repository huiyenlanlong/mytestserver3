<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UHWC Monthly Reporting</title>
    <style>
        body { font-family: Calibri, Arial, sans-serif; background: #f0f2f5; margin: 0; }
        h1, h2 { text-align: center; }
        .login-container, .form-container {
            max-width: 1100px; margin: 40px auto; padding: 20px; background: white; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.3); border-radius: 6px;
        }
        label { font-weight: bold; margin-top: 15px; display: block; }
        input, select { width: 100%; padding: 8px; margin-top: 5px; border: 1px solid #ccc; border-radius: 3px; }
        button { background: #1e6f43; color: white; padding: 10px 20px; margin-top: 20px; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #155b33; }
        .hidden { display: none; }

        table { width: 100%; border-collapse: collapse; margin-top: 20px; font-size: 14px; }
        th, td { border: 1px solid #d4d4d4; padding: 6px; text-align: center; }
        th { background: #1e6f43; color: white; font-weight: bold; }
        tr:nth-child(even) { background: #f9f9f9; }

        .header-title { text-align: center; font-size: 18px; font-weight: bold; margin-bottom: 20px; }
        .section-label { background: #d9ead3; padding: 5px; font-weight: bold; margin-top: 20px; }
    </style>
</head>
<body>

<!-- Login Page -->
<div class="login-container" id="loginPage">
    <h1>Admin Login</h1>
    <label for="username">Username</label>
    <input type="text" id="username">
    <label for="password">Password</label>
    <input type="password" id="password">
    <button onclick="login()">Login</button>
</div>

<!-- Form Page -->
<div class="form-container hidden" id="formPage">
    <div class="header-title">MANIPUR: UAAM (UHWC) Monthly Reporting Format</div>
    
    <div class="section-label">Facility Details</div>
    <label>Select District</label>
    <select id="district">
        <option value="">-- Select District --</option>
        <option>Imphal West</option>
        <option>Imphal East</option>
        <option>Thoubal</option>
        <option>Bishnupur</option>
    </select>

    <label>Name of the Block</label>
    <select id="block">
        <option value="">-- Select Block --</option>
        <option>Block A</option>
        <option>Block B</option>
        <option>Block C</option>
    </select>

    <label>Name of the Facility</label>
    <select id="facility">
        <option value="">-- Select Facility --</option>
        <option>U-AAM Thangal Bazar</option>
        <option>U-AAM XYZ Center</option>
        <option>U-AAM ABC Facility</option>
    </select>

    <label>Report Month and Year</label>
    <input type="month" id="reportMonth">

    <label>NIN</label>
    <input type="number" id="nin">

    <label>Catchment Population</label>
    <input type="number" id="population">

    <div class="section-label">Performance Indicators</div>
    <table id="performanceTable">
        <thead>
            <tr>
                <th>Sl</th>
                <th>Data Element / Indicator</th>
                <th>Data Source</th>
                <th>Monthly Target</th>
                <th>Performance for the Month</th>
                <th>Incentive Amount</th>
                <th>Incentive To Be Paid</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>1</td>
                <td><input type="text" value="Example Indicator 1"></td>
                <td><input type="text"></td>
                <td><input type="number"></td>
                <td><input type="number"></td>
                <td><input type="number"></td>
                <td><input type="number"></td>
            </tr>
            <tr>
                <td>2</td>
                <td><input type="text" value="Example Indicator 2"></td>
                <td><input type="text"></td>
                <td><input type="number"></td>
                <td><input type="number"></td>
                <td><input type="number"></td>
                <td><input type="number"></td>
            </tr>
            <!-- Add more rows as required -->
        </tbody>
    </table>

    <button onclick="submitData()">Submit Report</button>
</div>

<script>
const SCRIPT_URL = "YOUR_GOOGLE_APPS_SCRIPT_URL"; // Replace this

function login() {
    const user = document.getElementById('username').value;
    const pass = document.getElementById('password').value;
    if (user === "admin" && pass === "12345") {
        document.getElementById('loginPage').classList.add('hidden');
        document.getElementById('formPage').classList.remove('hidden');
    } else {
        alert("Invalid login");
    }
}

function submitData() {
    const district = document.getElementById('district').value;
    const block = document.getElementById('block').value;
    const facility = document.getElementById('facility').value;
    const reportMonth = document.getElementById('reportMonth').value;
    const nin = document.getElementById('nin').value;
    const population = document.getElementById('population').value;

    const rows = [];
    document.querySelectorAll("#performanceTable tbody tr").forEach(tr => {
        const cells = tr.querySelectorAll("input");
        rows.push({
            indicator: cells[0].value,
            source: cells[1].value,
            monthlyTarget: cells[2].value,
            performance: cells[3].value,
            incentiveAmount: cells[4].value,
            incentivePaid: cells[5].value
        });
    });

    const data = {
        district, block, facility, reportMonth, nin, population, rows
    };

    fetch(SCRIPT_URL, {
        method: "POST",
        body: JSON.stringify(data),
        headers: { "Content-Type": "application/json" }
    })
    .then(res => res.text())
    .then(response => alert("Report submitted successfully!"))
    .catch(err => alert("Error: " + err));
}
</script>

</body>
</html>
